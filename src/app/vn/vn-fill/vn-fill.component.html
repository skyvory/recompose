<md-sidenav-container>
	<md-sidenav mode="side" opened="true" #start (open)="closeStartButton.focus()" fxLayout="row" style="background-color:rgba(85, 90, 99,0.6);">
		<sidebar-selector></sidebar-selector>
	</md-sidenav>
	
	<md-toolbar>
		<span>Filling {{vn.title_jp}}</span>
		<!--<button md-button disabled (click)="start.open()">Menu</button>-->
	</md-toolbar>

	<div class="flex-container" fxLayout="row" fxLayoutWrap="wrap" fxLayoutAlign="space-around stretch">
		<div fxFlex="40">
			<md-input-container>
				<input md-input placeholder="vndb vn id" [(ngModel)]="vn.vndb_vn_id">
			</md-input-container>
			<button md-button (click)="retrieveVndbVn()">Load</button>
			<md-input-container style="width:100%;">
				<input md-input placeholder="title jp" [(ngModel)]="vn.title_jp">
			</md-input-container>
			<md-input-container style="width:100%;">
				<input md-input placeholder="title en" [(ngModel)]="vn.title_en">
			</md-input-container>
			<div fxLayout="row">
				<md-input-container style="width:65%">
					<input md-input placeholder="alias" [(ngModel)]="vn.alias">
				</md-input-container>
				<md-input-container style="width:35%">
					<input md-input placeholder="hashtag" [(ngModel)]="vn.hashtag">
				</md-input-container>
			</div>
			<br />
			<div fxLayout="row">
				<md-input-container fxFlex="30">
					<input md-input disabled [(ngModel)]="vn.developer_id">
				</md-input-container>
				<md-select placeholder="Developer" [(ngModel)]="vn.developer_id" name="developer" fxFlex="70">
					<md-option template="ngFor let developer of developers" [value]="developer.id">
						{{developer.original || "-"}} | {{developer.romaji || "-"}}
					</md-option>
				</md-select>
			</div>

			<br />
			<md-input-container>
				<input md-input placeholder="date release" type="date" [(ngModel)]="vn.date_release">
			</md-input-container>
			<md-input-container style="width:70%">
				<input md-input placeholder="image url" [(ngModel)]="vn.image">
			</md-input-container>
			<br />

			<md-slide-toggle [(ngModel)]="toggle.advanceOptions" [color]="primary">Advance options</md-slide-toggle>
			<br />

			<div *ngIf="toggle.advanceOptions">

				
				
				Add New Relation
				<md-input-container>
					<input md-input placeholder="Related VN ID" [(ngModel)]="vn.related_vn_id">
				</md-input-container>
			</div>

			<button *ngIf="fillState == 'new'" md-raised-button (click)="createVn()">Create</button>
			<button *ngIf="fillState == 'edit'" md-raised-button (click)="updateVn()">Update</button>
		</div>
		<div fxFlex="40">
			<div style="max-height:200px; max-width:300px; width:auto;height:200px;background-color:#65d8cc;">
				<img src="{{vn.image}}" style="max-height:200px; max-width:300px; width:auto;height:200px;display:block;margin:auto;">
			</div>
			<br />
			<button md-raised-button on-click="refreshCover(vn.id)">Force refresh</button>
			<br />
			<br />

			Dev create add-on
			<md-input-container style="width:100%;">
				<input md-input placeholder="Original" #devOriginal>
			</md-input-container>
			<md-input-container style="width:100%;">
				<input md-input placeholder="Furi" #devFuri>
			</md-input-container>
			<md-input-container style="width:100%;">
				<input md-input placeholder="Romaji" #devRomaji>
			</md-input-container>
			<button md-button (click)="createDeveloper(devOriginal.value, devFuri.value, devRomaji.value);">Add Dev</button>

			<md-divider></md-divider>

			<div class="flex-container" fxLayout="row" template="ngIf vn.relations">
				<div fxFlex="100">
					<md-list>
						<h3 md-subheader>Relations</h3>
						<md-list-item template="ngFor let relation of vn.relations" style="padding:0 0;">
							<md-icon md-list-avatar>folder</md-icon>
							<h4 md-line>{{relation.title_jp}}</h4>
							<p md-line>{{relation.date_release}}</p>
							<button md-button on-click="removeRelation(relation)" style="min-width:10px; line-height:18px; padding:0;" title="remove relation">x</button>
						</md-list-item>
						<md-divider></md-divider>
					</md-list>
				</div>
			</div>
			
		</div>
	</div>
</md-sidenav-container>
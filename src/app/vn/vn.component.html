<div class="container" [class.is-mobile]="mobileQuery.matches">
	<mat-toolbar color="primary" class="toolbar">
		<button mat-icon-button (click)="snav.toggle()"><mat-icon>menu</mat-icon></button>
		<h1>VN List</h1>
	</mat-toolbar>

	<mat-sidenav-container class="sidenav-container" [style.marginTop.px]="mobileQuery.matches ? 56 : 0">
		<mat-sidenav #snav [mode]="mobileQuery.matches ? 'over' : 'side'" [fixedInViewport]="mobileQuery.matches" fixedTopGap="56">
			<mat-nav-list>
				<a mat-list-item routerLink="/login">Login</a>
				<a mat-list-item routerLink="/home">Home</a>
				<a mat-list-item routerLink="/vn">VN</a>
				<a mat-list-item routerLink="/setting">Setting</a>
				<a mat-list-item routerLink="/assessment">Assesment</a>
			</mat-nav-list>
		</mat-sidenav>

		<mat-sidenav-content>
			<div fxLayout="row">
				<span class="spanning-flex"></span>
				<ng-template [ngIf]="user.role == 'administrator'">
					<button mat-fab class="new-vn-button" routerLink="/vn/new" routerLinkActive="active">
						<mat-icon class="md-24">add</mat-icon>
					</button>
				</ng-template>
			</div>

			<div>
				<div class="flex-container" fxLayout="row" fxLayoutWrap="wrap" fxLayoutAlign="space-around stretch">
					<ng-template ngFor let-vn [ngForOf]="vns">
						<mat-card fxFlex="33" fxFex.sm="100" fxFlex.md="50" fxFlex.lg="33" class="flex-item vn-card">
							<mat-card-title>{{vn?.title_original}}</mat-card-title>
							<mat-card-content>
								<div fxLayout="row">
									<div fxFlex="30" class="vn-image-container">
									<img [src]="vn.image" class="vn-image">
									</div>
									<div fxFlex="70" class="vn-properties-area">
										<form>
											<mat-form-field class="full-width">
												<input matInput placeholder="Title" readonly [(ngModel)]="vn.title_romaji" name="title_romaji" title="{{vn?.title_romaji}}">
											</mat-form-field>
											<mat-form-field class="full-width">
												<input matInput placeholder="By" readonly [(ngModel)]="vn.developer_romaji" title="{{vn?.developer_original}}" name="developer">
											</mat-form-field>
											<mat-form-field class="full-width">
												<input matInput placeholder="Release date" readonly [(ngModel)]="vn.date_release" name="date_release">
											</mat-form-field>
										</form>
									</div>
								</div>
							</mat-card-content>

							<mat-card-actions align="end">
								<ng-template [ngIf]="user.role == 'administrator'">
									<a mat-raised-button color="accent" [routerLink]="['/vn', vn.id, 'edit']">Edit</a>
								</ng-template>
								<ng-template [ngIf]="user.role != 'guest'">
									<button mat-raised-button color="primary" on-click="popAssessments(vn.id)">Assessments</button>
								</ng-template>
							</mat-card-actions>
						</mat-card>
					</ng-template>
				</div>
			</div>

			<mat-paginator #paginator [length]="query.total" [pageSize]="query.limit" [pageSizeOptions]="[]" (page)="pageEvent = changePage($event)">
			</mat-paginator>
				<br>
				<br>
				<br>
		</mat-sidenav-content>
	</mat-sidenav-container>

</div>